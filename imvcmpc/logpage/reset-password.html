<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password - IMVCMPC</title>
    <link rel="stylesheet" href="reset-password.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Intro Logo Animation -->
    <div id="introLogo" class="intro-logo">
        <img src="../assets/logo.png" alt="IMVCMPC Logo">
    </div>
    
    <!-- Reset Password Screen -->
    <div id="resetPasswordScreen" class="screen active">
        <main>
        <div class="reset-password-container">
            <div class="reset-password-card">
                <div class="reset-password-left">
                    <div class="reset-password-info">
                        <h1>Reset Your Password</h1>
                        <h2>IMVCMPC</h2>
                        <p>Ibaan Market Vendors & Community<br>Multi-Purpose Cooperative</p>
                    </div>
                </div>
                <div class="reset-password-right">
                    <div class="reset-password-form">
                        <div class="logo-container">
                            <img src="../assets/logo.png" alt="IMVCMPC Logo" class="logo">
                        </div>
                        <h2 class="mobile-title">Reset Password</h2>
                        <div class="divider"></div>
                        
                        <!-- Loading State -->
                        <div id="loadingState" class="loading-state">
                            <div class="loading-spinner-small">
                                <i class="fas fa-spinner fa-spin"></i>
                            </div>
                            <p>Verifying reset link...</p>
                        </div>
                        
                        <!-- Error State -->
                        <div id="errorState" class="error-state" style="display: none;">
                            <div class="error-icon">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <h3>Invalid or Expired Link</h3>
                            <p id="errorMessage">This password reset link is invalid or has expired.</p>
                            <button onclick="window.location.href='/login'" class="back-to-login-btn">
                                <i class="fas fa-arrow-left"></i> Back to Login
                            </button>
                        </div>
                        
                        <!-- Reset Form -->
                        <div id="resetForm" class="reset-form-content" style="display: none;">
                            <h3>Create New Password</h3>
                            <p class="user-info" id="userInfoText"></p>
                            
                            <div id="resetError" class="error-message" style="display: none;">
                                <i class="fas fa-exclamation-circle"></i>
                                <span id="resetErrorText"></span>
                            </div>
                            
                            <div class="form-group">
                                <label for="newPassword">New Password</label>
                                <div class="input-group">
                                    <i class="fas fa-lock"></i>
                                    <input type="password" id="newPassword" name="newPassword" 
                                          placeholder="Enter new password" autocomplete="new-password" required>
                                    <button type="button" class="toggle-password" onclick="togglePassword('newPassword')" aria-label="Show new password">
                                        <i class="fas fa-eye" aria-hidden="true"></i>
                                    </button>
                                </div>
                                <div class="password-requirements">
                                    <p class="requirement-label">Password must contain:</p>
                                    <ul class="requirements-list">
                                        <li id="req-length"><i class="fas fa-circle"></i> At least 8 characters</li>
                                        <li id="req-uppercase"><i class="fas fa-circle"></i> One uppercase letter</li>
                                        <li id="req-number"><i class="fas fa-circle"></i> One number</li>
                                        <li id="req-special"><i class="fas fa-circle"></i> One special character</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="confirmPassword">Confirm Password</label>
                                <div class="input-group">
                                    <i class="fas fa-lock"></i>
                                    <input type="password" id="confirmPassword" name="confirmPassword" 
                                          placeholder="Confirm new password" autocomplete="new-password" required>
                                    <button type="button" class="toggle-password" onclick="togglePassword('confirmPassword')" aria-label="Show confirm password">
                                        <i class="fas fa-eye" aria-hidden="true"></i>
                                    </button>
                                </div>
                                <span id="passwordMatchError" class="error-text" style="display: none;">Passwords do not match</span>
                            </div>
                            
                            <button type="button" id="resetPasswordBtn" class="reset-password-btn" onclick="submitResetPassword()">
                                <span id="resetPasswordBtnText">Reset Password</span>
                            </button>
                            
                            <div class="back-to-login-link">
                                <a href="/login">
                                    <i class="fas fa-arrow-left"></i> Back to Login
                                </a>
                            </div>
                        </div>
                        
                        <!-- Success State -->
                        <div id="successState" class="success-state" style="display: none;">
                            <div class="success-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <h3>Password Reset Successful!</h3>
                            <p>Your password has been reset successfully. You can now log in with your new password.</p>
                            <button onclick="window.location.href='/login'" class="go-to-login-btn">
                                Go to Login
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </main>
    </div>

    <script src="reset-password.js"></script>

    <!-- Live Reload for Development -->
    <script src="/shared/js/live-reload.js"></script>

</body>
</html>

